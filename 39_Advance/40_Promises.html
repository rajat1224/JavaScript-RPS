<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h2>The Promise object represents the eventual completion (or failure) of an asynchronous operation and its resulting value.</h2>
    <h4>A Promise is in one of these states:<br>

        pending: initial state, neither fulfilled nor rejected.<br>
        fulfilled: meaning that the operation was completed successfully.<br>
        rejected: meaning that the operation failed.</h4>

        <h2>library blueBird and queue instead promise in past</h2>
</body>
<script>
 //1    
   let promiseOne=new Promise(function(resolve,reject){
        //do an async task
        //DB calls,cryptography,network
        setTimeout(()=>
    {
        console.log("async task is completed");
        
        resolve();
    },2000)
   });

   promiseOne.then(()=>
   {
      console.log("promise consumed");
   })

//2
console.log("_________________________________________");
   let promiseTwo=new Promise(function(resolve,reject){
        //do an async task
        //DB calls,cryptography,network
        setTimeout(()=>
      {
        console.log("async task 2 is completed");
        
        //resolve();
        resolve({username:"chai rajat",email:"abc@gmail.com"});
        //reject();
      },2000)
   })
   .then((user)=>{
    console.log("resolved 2");
    console.log(user);
   })
   .catch(()=>{console.log("rejected 2");})
   .finally(()=>{console.log("promise 2 finally");})

 //3
 console.log("_________________________________________");
 let promiseThree=new Promise(function(resolve,reject){
        //do an async task
        //DB calls,cryptography,network
        setTimeout(()=>
      {
        console.log("async task 3 is completed");

        let flag=true;
        if(!flag){
            resolve({username:"chai rajat",email:"abc@gmail.com"}); 
        }else{
            reject();
        }
      },2000)
   })
   .then((user)=>{
      console.log("resolved 3");
      console.log(user);
       return user.username;
   })
   .then((username)=>{console.log(username);})
   .catch(()=>{console.log("rejected 3");})
   .finally(()=>{console.log("promise 3 finally");})


//4
let promiseFour=new Promise(function(resolve,reject){
        //do an async task
        //DB calls,cryptography,network
        setTimeout(()=>
      {
        console.log("_________________________________________");
        console.log("async task 4 is completed");

        let flag=true;
        if(!flag){
            resolve({username:"JavaScript",email:"abc@gmail.com"}); 
        }else{
            reject("ERROR: something went wrong");
        }
      },2000)
   })

   async function consumePromiseFour(){
    try {
        const response=await promiseFour;
        console.log(response);
    } catch (error) {
        console.log(error);
    }
   }
   consumePromiseFour();
 

///five async await
console.log("async await starting here!__________");
async function getUserDetails(){
    try {
        const response=await fetch('https://api.github.com/users/hiteshchoudhary');
        console.log("fetch Working");
        console.log(await response.json());
    } catch (error) {
        console.log(error);
    }
   }   
   getUserDetails();



fetch('https://api.github.com/users/hiteshchoudhary')
.then((response)=>
{
   return response.json();
})
.then((data)=>
{
    console.log(data);
})
.catch((error)=>
{
    console.log(error);
})



</script>
</html>